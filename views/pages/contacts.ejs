<!-- Contact Management -->
<div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
    <div>
        <h2 class="mb-1">
            <i class="bi bi-person-lines-fill me-2"></i>Contact Management
        </h2>
        <p class="text-muted mb-0">Manage all your contacts in one place</p>
    </div>
    <button class="btn btn-primary" onclick="showAddContactModal()">
        <i class="bi bi-person-plus me-2"></i>Add New Contact
    </button>
</div>

<!-- Stats Cards -->
<div class="row g-3 mb-4">
    <div class="col-6 col-md-4">
        <div class="card bg-primary bg-opacity-10 border-0">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <i class="bi bi-people fs-2 text-primary"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Total Contacts</h6>
                        <h4 class="mb-0" id="totalContacts">0</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-md-4">
        <div class="card bg-warning bg-opacity-10 border-0">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <i class="bi bi-star-fill fs-2 text-warning"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Favorites</h6>
                        <h4 class="mb-0" id="favoriteCount">0</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-4">
        <div class="card bg-success bg-opacity-10 border-0">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                        <i class="bi bi-building fs-2 text-success"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h6 class="mb-1">Companies</h6>
                        <h4 class="mb-0" id="companyCount">0</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Search Bar -->
<div class="card mb-4">
    <div class="card-body">
        <div class="input-group">
            <span class="input-group-text bg-white">
                <i class="bi bi-search"></i>
            </span>
            <input type="text" class="form-control" id="searchContacts" placeholder="Search by name, phone, or email...">
        </div>
    </div>
</div>

<!-- Quick Filters -->
<div class="mb-4 d-flex gap-2 flex-wrap">
    <button class="btn btn-outline-primary btn-sm" onclick="filterFavorites(true)">
        <i class="bi bi-star-fill me-1"></i>Favorites
    </button>
    <button class="btn btn-outline-secondary btn-sm" onclick="filterFavorites(false)">
        <i class="bi bi-star me-1"></i>All Contacts
    </button>
</div>

<!-- Contacts Grid -->
<div class="row" id="contactsContainer">
    <!-- Contacts will be loaded here -->
    <div class="col-12 text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
</div>

<!-- Pagination -->
<nav class="mt-4" id="paginationContainer">
    <ul class="pagination justify-content-center" id="contactsPagination">
        <!-- Populated by JavaScript -->
    </ul>
</nav>

<!-- Add/Edit Contact Modal -->
<div class="modal fade" id="addContactModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="contactModalTitle">
                    <i class="bi bi-person-plus me-2"></i>Add New Contact
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="contactForm" onsubmit="return false;">
                    <input type="hidden" id="contactId">
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Name *</label>
                        <input type="text" class="form-control" id="contactName" required>
                        <div class="invalid-feedback">Name is required</div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Phone Number *</label>
                        <input type="tel" class="form-control" id="contactPhone" required>
                        <div class="invalid-feedback">Phone number is required</div>
                        <small class="text-muted">Format: +8801712345678 or 01712345678</small>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Email</label>
                        <input type="email" class="form-control" id="contactEmail">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Company</label>
                        <input type="text" class="form-control" id="contactCompany">
                    </div>
                    
                    <div class="mb-3">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="contactFavorite">
                            <label class="form-check-label" for="contactFavorite">Add to favorites</label>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Notes</label>
                        <textarea class="form-control" id="contactNotes" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger d-none" id="deleteContactBtn">Delete</button>
                <button type="button" class="btn btn-primary" id="saveContactBtn">Save Contact</button>
            </div>
        </div>
    </div>
</div>

<!-- Contact Detail Modal (View Only) -->
<div class="modal fade" id="contactDetailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-person-circle me-2"></i>Contact Details
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="contactDetailContent">
                <!-- Populated by JavaScript -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="quickCallFromDetail()">
                    <i class="bi bi-telephone me-2"></i>Call
                </button>
                <button type="button" class="btn btn-info" onclick="quickSmsFromDetail()">
                    <i class="bi bi-chat-dots me-2"></i>SMS
                </button>
                <button type="button" class="btn btn-primary" onclick="editContactFromDetail()">
                    <i class="bi bi-pencil me-2"></i>Edit
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Load Contacts page script -->
<script src="/js/contacts.js"></script>

<style>
.cursor-pointer {
    cursor: pointer;
}

.contact-card {
    transition: all 0.2s;
    border: 1px solid #dee2e6;
    border-radius: 0.5rem;
    overflow: hidden;
    height: 100%;
}

.contact-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.contact-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    color: white;
}

.quick-actions {
    opacity: 0;
    transition: opacity 0.2s;
}

.contact-card:hover .quick-actions {
    opacity: 1;
}

@media (max-width: 767.98px) {
    .contact-avatar {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
    }
    
    .quick-actions {
        opacity: 1;
    }
}

.btn-group-sm .btn {
    padding: 0.25rem 0.5rem;
}
</style>